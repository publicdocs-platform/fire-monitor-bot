- var friendlyDate = (d) => new Date(d).toLocaleString('en-US', {timeZone:'UTC', hour12:true, year: 'numeric', day: 'numeric', month: 'short', day: 'numeric', hour: 'numeric', minute: 'numeric', timeZoneName: 'short'});
doctype html
html.perim
    head
        meta(charset="UTF-8")
        link(rel="stylesheet",href="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.2.0/css/ol.css",integrity="sha384-C7SzZySesoxngSK5V0BaD1DUap0LPZGWZpnXQGoIwvBXFc8G21y4s1QYvyr84FNa",crossorigin="anonymous")

        script(src='https://code.jquery.com/jquery-3.3.1.min.js',
               integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=",crossorigin="anonymous")

        script(src="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.2.0/build/ol.js",
               integrity="sha384-yaIgZleEnDCw26CwitrCKE9Jl4wLWEBw7moR6IF7CXoeMpRVWmOc0NDk222RUhBU",
               crossorigin="anonymous")

        script
            include ../node_modules/ol-helpers/index.js
        script
            include ../client/renderMap.js
        style
            include style.css

            
    body
        div.content
            div.banner
                div.title
                    h1
                        .perimCenter
                            | FOR INFORMATION ONLY — DO NOT USE FOR SAFETY/EMERGENCY/EVACUATION PURPOSES
                            br
                            | PERIMETERS AND SATELLITE DATA ARE APPROXIMATE AND OFTEN INCORRECT AND OUT-OF-DATE
                            br
                            | UNOFFICIAL — USE AT YOUR OWN RISK — FIRES MAY BE CLOSER THAN THEY APPEAR
                            if (data.current ? (data.current.NFSAType || '') : '').includes('Emerging')
                                br
                                | THIS IS AN EMERGING FIRE REPORT — DETAILS MAY BE ESPECIALLY UNCERTAIN
                        
            div.warn
                div.innerWarn Consult local public officials for safety, emergency, and evacuation information. 

                div.cite
                    b 
                        | To the maximum extent permitted by law: (1) all content is provided to you on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, WHETHER EXPRESS, IMPLIED, STATUTORY, OR OTHER; and (2) IN NO EVENT WILL ANY AUTHOR OR DATA PROVIDER BE LIABLE TO YOU ON ANY LEGAL THEORY (INCLUDING, WITHOUT LIMITATION, NEGLIGENCE) OR OTHERWISE FOR ANY DIRECT, SPECIAL, INDIRECT, INCIDENTAL, CONSEQUENTIAL, PUNITIVE, EXEMPLARY, OR OTHER LOSSES, COSTS, EXPENSES, OR DAMAGES arising out your use of this content, even if the author or data provider has been advised of the possibility of such losses, costs, expenses, or damages.
                    br
                    | Generated by twitter.com/@#{config.twitterName}. Not affiliated with any government agencies. No claim to original U.S. Government works.
                    | Open original image for full resolution.
            div#map(class='map bigMap',style='position:relative;')
                div.mapTitle
                    h1
                        if data.current
                            span #{data.current.Fire_Name} Fire
                        else
                            span #{data.title}
                        if data.perimDateTime
                            span.perimDate Perimeter @#{friendlyDate(data.perimDateTime)}
                        else
                            span.perimDate General Vicinity
        script
            | showMap(#{data.lon}, #{data.lat}, #{data.zoom}, 'perim', !{JSON.stringify(data.cities ? data.cities.all : [])});

        
